!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.SMSBumpBrowseAbandonment=n():t.SMSBumpBrowseAbandonment=n()}(window,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},
e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?
function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="https://d18eg7dreypte5.cloudfront.net/browse-abandonment/",e(e.s=7)}([function(t,n,e){(function(t){e.d(n,"e",function(){return r}),e.d(n,"p",function(){return i}),e.d(n,"a",function(){return u}),e.d(n,"c",function(){return o}),e.d(n,"d",function(){return a}),e.d(n,"o",function(){return c}),e.d(n,"q",function(){return f}),e.d(n,"t",function(){return s}),
e.d(n,"i",function(){return l}),e.d(n,"r",function(){return d}),e.d(n,"s",function(){return p}),e.d(n,"k",function(){return y}),e.d(n,"m",function(){return h}),e.d(n,"j",function(){return m}),e.d(n,"l",function(){return g}),e.d(n,"g",function(){return v}),e.d(n,"f",function(){return _}),e.d(n,"h",function(){return b}),e.d(n,"n",function(){return w}),e.d(n,"b",function(){return j});var r="1.13.4",i="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||Function("return this")()||
{},u=Array.prototype,o=Object.prototype,a="undefined"!=typeof Symbol?Symbol.prototype:null,c=u.push,f=u.slice,s=o.toString,l=o.hasOwnProperty,d="undefined"!=typeof ArrayBuffer,p="undefined"!=typeof DataView,y=Array.isArray,h=Object.keys,m=Object.create,g=d&&ArrayBuffer.isView,v=isNaN,_=isFinite,b=!{toString:null}.propertyIsEnumerable("toString"),w=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],j=Math.pow(2,53)-1}).call(this,e(6))},function(t,n,e){const r=
e(2),i=e(3),u=e(4),o=e(5);function a(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string");}function c(t,n){return n.encode?n.strict?r(t):encodeURIComponent(t):t}function f(t,n){return n.decode?i(t):t}function s(t){const n=t.indexOf("#");return-1!==n&&(t=t.slice(0,n)),t}function l(t){const n=(t=s(t)).indexOf("?");return-1===n?"":t.slice(n+1)}function d(t,n){return n.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?
t=Number(t):!n.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function p(t,n){a((n=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},n)).arrayFormatSeparator);const e=function(t){let n;switch(t.arrayFormat){case "index":return(t,e,r)=>{n=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),n?(void 0===r[t]&&(r[t]={}),r[t][n[1]]=e):r[t]=e};case "bracket":return(t,e,r)=>{n=/(\[\])$/.exec(t),
t=t.replace(/\[\]$/,""),n?void 0!==r[t]?r[t]=[].concat(r[t],e):r[t]=[e]:r[t]=e};case "comma":case "separator":return(n,e,r)=>{const i="string"==typeof e&&e.includes(t.arrayFormatSeparator),u="string"==typeof e&&!i&&f(e,t).includes(t.arrayFormatSeparator);e=u?f(e,t):e;const o=i||u?e.split(t.arrayFormatSeparator).map(n=>f(n,t)):null===e?e:f(e,t);r[n]=o};default:return(t,n,e)=>{void 0!==e[t]?e[t]=[].concat(e[t],n):e[t]=n}}}(n),r=Object.create(null);if("string"!=typeof t)return r;if(!(t=t.trim().replace(/^[?#&]/,
"")))return r;for(const i of t.split("&")){if(""===i)continue;let [t,o]=u(n.decode?i.replace(/\+/g," "):i,"=");o=void 0===o?null:["comma","separator"].includes(n.arrayFormat)?o:f(o,n),e(f(t,n),o,r)}for(const t of Object.keys(r)){const e=r[t];if("object"==typeof e&&null!==e)for(const t of Object.keys(e))e[t]=d(e[t],n);else r[t]=d(e,n)}return!1===n.sort?r:(!0===n.sort?Object.keys(r).sort():Object.keys(r).sort(n.sort)).reduce((t,n)=>{const e=r[n];return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)?
t[n]=function t(n){return Array.isArray(n)?n.sort():"object"==typeof n?t(Object.keys(n)).sort((t,n)=>Number(t)-Number(n)).map(t=>n[t]):n}(e):t[n]=e,t},Object.create(null))}n.extract=l,n.parse=p,n.stringify=(t,n)=>{if(!t)return"";a((n=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},n)).arrayFormatSeparator);const e=e=>n.skipNull&&null==t[e]||n.skipEmptyString&&""===t[e],r=function(t){switch(t.arrayFormat){case "index":return n=>(e,r)=>{const i=e.length;return void 0===
r||t.skipNull&&null===r||t.skipEmptyString&&""===r?e:null===r?[...e,[c(n,t),"[",i,"]"].join("")]:[...e,[c(n,t),"[",c(i,t),"]=",c(r,t)].join("")]};case "bracket":return n=>(e,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?e:null===r?[...e,[c(n,t),"[]"].join("")]:[...e,[c(n,t),"[]=",c(r,t)].join("")];case "comma":case "separator":return n=>(e,r)=>null==r||0===r.length?e:0===e.length?[[c(n,t),"=",c(r,t)].join("")]:[[e,c(r,t)].join(t.arrayFormatSeparator)];default:return n=>(e,r)=>void 0===
r||t.skipNull&&null===r||t.skipEmptyString&&""===r?e:null===r?[...e,c(n,t)]:[...e,[c(n,t),"=",c(r,t)].join("")]}}(n),i={};for(const n of Object.keys(t))e(n)||(i[n]=t[n]);const u=Object.keys(i);return!1!==n.sort&&u.sort(n.sort),u.map(e=>{const i=t[e];return void 0===i?"":null===i?c(e,n):Array.isArray(i)?i.reduce(r(e),[]).join("&"):c(e,n)+"="+c(i,n)}).filter(t=>t.length>0).join("&")},n.parseUrl=(t,n)=>{n=Object.assign({decode:!0},n);const [e,r]=u(t,"#");return Object.assign({url:e.split("?")[0]||"",
query:p(l(t),n)},n&&n.parseFragmentIdentifier&&r?{fragmentIdentifier:f(r,n)}:{})},n.stringifyUrl=(t,e)=>{e=Object.assign({encode:!0,strict:!0},e);const r=s(t.url).split("?")[0]||"",i=n.extract(t.url),u=n.parse(i,{sort:!1}),o=Object.assign(u,t.query);let a=n.stringify(o,e);a&&(a="?"+a);let f=function(t){let n="";const e=t.indexOf("#");return-1!==e&&(n=t.slice(e)),n}(t.url);return t.fragmentIdentifier&&(f="#"+c(t.fragmentIdentifier,e)),`${r}${a}${f}`},n.pick=(t,e,r)=>{r=Object.assign({parseFragmentIdentifier:!0},
r);const {url:i,query:u,fragmentIdentifier:a}=n.parseUrl(t,r);return n.stringifyUrl({url:i,query:o(u,e),fragmentIdentifier:a},r)},n.exclude=(t,e,r)=>{const i=Array.isArray(e)?t=>!e.includes(t):(t,n)=>!e(t,n);return n.pick(t,i,r)}},function(t,n,e){t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,t=>"%"+t.charCodeAt(0).toString(16).toUpperCase())},function(t,n,e){var r=new RegExp("%[a-f0-9]{2}","gi"),i=new RegExp("(%[a-f0-9]{2})+","gi");function u(t,n){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===
t.length)return t;n=n||1;var e=t.slice(0,n),r=t.slice(n);return Array.prototype.concat.call([],u(e),u(r))}function o(t){try{return decodeURIComponent(t)}catch(i){for(var n=t.match(r),e=1;e<n.length;e++)n=(t=u(n,e).join("")).match(r);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(n){return function(t){for(var n={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},
e=i.exec(t);e;){try{n[e[0]]=decodeURIComponent(e[0])}catch(t){var r=o(e[0]);r!==e[0]&&(n[e[0]]=r)}e=i.exec(t)}n["%C2"]="\ufffd";for(var u=Object.keys(n),a=0;a<u.length;a++){var c=u[a];t=t.replace(new RegExp(c,"g"),n[c])}return t}(t)}}},function(t,n,e){t.exports=(t,n)=>{if("string"!=typeof t||"string"!=typeof n)throw new TypeError("Expected the arguments to be of type `string`");if(""===n)return[t];const e=t.indexOf(n);return-1===e?[t]:[t.slice(0,e),t.slice(e+n.length)]}},function(t,n,e){t.exports=
function(t,n){for(var e={},r=Object.keys(t),i=Array.isArray(n),u=0;u<r.length;u++){var o=r[u],a=t[o];(i?-1!==n.indexOf(o):n(o,a,t))&&(e[o]=a)}return e}},function(t,n){var e;e=function(){return this}();try{e=e||(new Function("return this"))()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n,e){e.r(n);var r={};e.r(r),e.d(r,"VERSION",function(){return u.e}),e.d(r,"restArguments",function(){return o}),e.d(r,"isObject",function(){return a}),e.d(r,"isNull",function(){return c}),e.d(r,
"isUndefined",function(){return f}),e.d(r,"isBoolean",function(){return s}),e.d(r,"isElement",function(){return l}),e.d(r,"isString",function(){return p}),e.d(r,"isNumber",function(){return y}),e.d(r,"isDate",function(){return h}),e.d(r,"isRegExp",function(){return m}),e.d(r,"isError",function(){return g}),e.d(r,"isSymbol",function(){return v}),e.d(r,"isArrayBuffer",function(){return _}),e.d(r,"isDataView",function(){return x}),e.d(r,"isArray",function(){return T}),e.d(r,"isFunction",function(){return j}),
e.d(r,"isArguments",function(){return E}),e.d(r,"isFinite",function(){return N}),e.d(r,"isNaN",function(){return q}),e.d(r,"isTypedArray",function(){return C}),e.d(r,"isEmpty",function(){return J}),e.d(r,"isMatch",function(){return V}),e.d(r,"isEqual",function(){return G}),e.d(r,"isMap",function(){return it}),e.d(r,"isWeakMap",function(){return ut}),e.d(r,"isSet",function(){return ot}),e.d(r,"isWeakSet",function(){return at}),e.d(r,"keys",function(){return $}),e.d(r,"allKeys",function(){return H}),
e.d(r,"values",function(){return ct}),e.d(r,"pairs",function(){return ft}),e.d(r,"invert",function(){return st}),e.d(r,"functions",function(){return lt}),e.d(r,"methods",function(){return lt}),e.d(r,"extend",function(){return pt}),e.d(r,"extendOwn",function(){return yt}),e.d(r,"assign",function(){return yt}),e.d(r,"defaults",function(){return ht}),e.d(r,"create",function(){return gt}),e.d(r,"clone",function(){return vt}),e.d(r,"tap",function(){return _t}),e.d(r,"get",function(){return kt}),e.d(r,
"has",function(){return Ot}),e.d(r,"mapObject",function(){return Nt}),e.d(r,"identity",function(){return St}),e.d(r,"constant",function(){return P}),e.d(r,"noop",function(){return qt}),e.d(r,"toPath",function(){return bt}),e.d(r,"property",function(){return xt}),e.d(r,"propertyOf",function(){return Pt}),e.d(r,"matcher",function(){return At}),e.d(r,"matches",function(){return At}),e.d(r,"times",function(){return Ft}),e.d(r,"random",function(){return Mt}),e.d(r,"now",function(){return Ut}),e.d(r,"escape",
function(){return Ct}),e.d(r,"unescape",function(){return Wt}),e.d(r,"templateSettings",function(){return Lt}),e.d(r,"template",function(){return zt}),e.d(r,"result",function(){return Gt}),e.d(r,"uniqueId",function(){return Zt}),e.d(r,"chain",function(){return Qt}),e.d(r,"iteratee",function(){return It}),e.d(r,"partial",function(){return nn}),e.d(r,"bind",function(){return en}),e.d(r,"bindAll",function(){return on}),e.d(r,"memoize",function(){return an}),e.d(r,"delay",function(){return cn}),e.d(r,
"defer",function(){return fn}),e.d(r,"throttle",function(){return sn}),e.d(r,"debounce",function(){return ln}),e.d(r,"wrap",function(){return dn}),e.d(r,"negate",function(){return pn}),e.d(r,"compose",function(){return yn}),e.d(r,"after",function(){return hn}),e.d(r,"before",function(){return mn}),e.d(r,"once",function(){return gn}),e.d(r,"findKey",function(){return vn}),e.d(r,"findIndex",function(){return bn}),e.d(r,"findLastIndex",function(){return wn}),e.d(r,"sortedIndex",function(){return jn}),
e.d(r,"indexOf",function(){return On}),e.d(r,"lastIndexOf",function(){return Sn}),e.d(r,"find",function(){return An}),e.d(r,"detect",function(){return An}),e.d(r,"findWhere",function(){return xn}),e.d(r,"each",function(){return Tn}),e.d(r,"forEach",function(){return Tn}),e.d(r,"map",function(){return Dn}),e.d(r,"collect",function(){return Dn}),e.d(r,"reduce",function(){return En}),e.d(r,"foldl",function(){return En}),e.d(r,"inject",function(){return En}),e.d(r,"reduceRight",function(){return Nn}),
e.d(r,"foldr",function(){return Nn}),e.d(r,"filter",function(){return qn}),e.d(r,"select",function(){return qn}),e.d(r,"reject",function(){return Pn}),e.d(r,"every",function(){return Fn}),e.d(r,"all",function(){return Fn}),e.d(r,"some",function(){return Mn}),e.d(r,"any",function(){return Mn}),e.d(r,"contains",function(){return Un}),e.d(r,"includes",function(){return Un}),e.d(r,"include",function(){return Un}),e.d(r,"invoke",function(){return Rn}),e.d(r,"pluck",function(){return Bn}),e.d(r,"where",
function(){return Cn}),e.d(r,"max",function(){return Wn}),e.d(r,"min",function(){return Ln}),e.d(r,"shuffle",function(){return Kn}),e.d(r,"sample",function(){return Vn}),e.d(r,"sortBy",function(){return Yn}),e.d(r,"groupBy",function(){return Gn}),e.d(r,"indexBy",function(){return Hn}),e.d(r,"countBy",function(){return Zn}),e.d(r,"partition",function(){return Qn}),e.d(r,"toArray",function(){return Jn}),e.d(r,"size",function(){return Xn}),e.d(r,"pick",function(){return ne}),e.d(r,"omit",function(){return ee}),
e.d(r,"first",function(){return ie}),e.d(r,"head",function(){return ie}),e.d(r,"take",function(){return ie}),e.d(r,"initial",function(){return re}),e.d(r,"last",function(){return oe}),e.d(r,"rest",function(){return ue}),e.d(r,"tail",function(){return ue}),e.d(r,"drop",function(){return ue}),e.d(r,"compact",function(){return ae}),e.d(r,"flatten",function(){return ce}),e.d(r,"without",function(){return se}),e.d(r,"uniq",function(){return le}),e.d(r,"unique",function(){return le}),e.d(r,"union",function(){return de}),
e.d(r,"intersection",function(){return pe}),e.d(r,"difference",function(){return fe}),e.d(r,"unzip",function(){return ye}),e.d(r,"transpose",function(){return ye}),e.d(r,"zip",function(){return he}),e.d(r,"object",function(){return me}),e.d(r,"range",function(){return ge}),e.d(r,"chunk",function(){return ve}),e.d(r,"mixin",function(){return be}),e.d(r,"default",function(){return we});var i=e(1),u=e(0);function o(t,n){return n=null==n?t.length-1:+n,function(){for(var e=Math.max(arguments.length-n,
0),r=Array(e),i=0;i<e;i++)r[i]=arguments[i+n];switch(n){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var u=Array(n+1);for(i=0;i<n;i++)u[i]=arguments[i];return u[n]=r,t.apply(this,u)}}function a(t){var n=typeof t;return"function"===n||"object"===n&&!!t}function c(t){return null===t}function f(t){return void 0===t}function s(t){return!0===t||!1===t||"[object Boolean]"===u.t.call(t)}function l(t){return!(!t||1!==t.nodeType)}
function d(t){var n="[object "+t+"]";return function(t){return u.t.call(t)===n}}var p=d("String"),y=d("Number"),h=d("Date"),m=d("RegExp"),g=d("Error"),v=d("Symbol"),_=d("ArrayBuffer"),b=d("Function"),w=u.p.document&&u.p.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof w&&(b=function(t){return"function"==typeof t||!1});var j=b,k=d("Object"),O=u.s&&k(new DataView(new ArrayBuffer(8))),S="undefined"!=typeof Map&&k(new Map),A=d("DataView");var x=O?function(t){return null!=t&&j(t.getInt8)&&
_(t.buffer)}:A,T=u.k||d("Array");function D(t,n){return null!=t&&u.i.call(t,n)}var I=d("Arguments");!function(){I(arguments)||(I=function(t){return D(t,"callee")})}();var E=I;function N(t){return!v(t)&&Object(u.f)(t)&&!isNaN(parseFloat(t))}function q(t){return y(t)&&Object(u.g)(t)}function P(t){return function(){return t}}function F(t){return function(n){var e=t(n);return"number"==typeof e&&e>=0&&e<=u.b}}function M(t){return function(n){return null==n?void 0:n[t]}}var U=M("byteLength"),R=F(U),B=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;
var C=u.r?function(t){return u.l?Object(u.l)(t)&&!x(t):R(t)&&B.test(u.t.call(t))}:P(!1),W=M("length");function L(t,n){n=function(t){for(var n={},e=t.length,r=0;r<e;++r)n[t[r]]=!0;return{contains:function(t){return!0===n[t]},push:function(e){return n[e]=!0,t.push(e)}}}(n);var e=u.n.length,r=t.constructor,i=j(r)&&r.prototype||u.c,o="constructor";for(D(t,o)&&!n.contains(o)&&n.push(o);e--;)(o=u.n[e])in t&&t[o]!==i[o]&&!n.contains(o)&&n.push(o)}function $(t){if(!a(t))return[];if(u.m)return Object(u.m)(t);
var n=[];for(var e in t)D(t,e)&&n.push(e);return u.h&&L(t,n),n}function J(t){if(null==t)return!0;var n=W(t);return"number"==typeof n&&(T(t)||p(t)||E(t))?0===n:0===W($(t))}function V(t,n){var e=$(n),r=e.length;if(null==t)return!r;for(var i=Object(t),u=0;u<r;u++){var o=e[u];if(n[o]!==i[o]||!(o in i))return!1}return!0}function K(t){return t instanceof K?t:this instanceof K?void(this._wrapped=t):new K(t)}function Y(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,U(t))}K.VERSION=u.e,K.prototype.value=
function(){return this._wrapped},K.prototype.valueOf=K.prototype.toJSON=K.prototype.value,K.prototype.toString=function(){return String(this._wrapped)};function z(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var i=typeof t;return("function"===i||"object"===i||"object"==typeof n)&&function t(n,e,r,i){n instanceof K&&(n=n._wrapped);e instanceof K&&(e=e._wrapped);var o=u.t.call(n);if(o!==u.t.call(e))return!1;if(O&&"[object Object]"==o&&x(n)){if(!x(e))return!1;
o="[object DataView]"}switch(o){case "[object RegExp]":case "[object String]":return""+n==""+e;case "[object Number]":return+n!=+n?+e!=+e:0==+n?1/+n==1/e:+n==+e;case "[object Date]":case "[object Boolean]":return+n==+e;case "[object Symbol]":return u.d.valueOf.call(n)===u.d.valueOf.call(e);case "[object ArrayBuffer]":case "[object DataView]":return t(Y(n),Y(e),r,i)}var a="[object Array]"===o;if(!a&&C(n)){if(U(n)!==U(e))return!1;if(n.buffer===e.buffer&&n.byteOffset===e.byteOffset)return!0;a=!0}if(!a){if("object"!=
typeof n||"object"!=typeof e)return!1;var c=n.constructor,f=e.constructor;if(c!==f&&!(j(c)&&c instanceof c&&j(f)&&f instanceof f)&&"constructor"in n&&"constructor"in e)return!1}i=i||[];var s=(r=r||[]).length;for(;s--;)if(r[s]===n)return i[s]===e;if(r.push(n),i.push(e),a){if((s=n.length)!==e.length)return!1;for(;s--;)if(!z(n[s],e[s],r,i))return!1}else{var l,d=$(n);if(s=d.length,$(e).length!==s)return!1;for(;s--;)if(l=d[s],!D(e,l)||!z(n[l],e[l],r,i))return!1}return r.pop(),i.pop(),!0}(t,n,e,r)}function G(t,
n){return z(t,n)}function H(t){if(!a(t))return[];var n=[];for(var e in t)n.push(e);return u.h&&L(t,n),n}function Z(t){var n=W(t);return function(e){if(null==e)return!1;var r=H(e);if(W(r))return!1;for(var i=0;i<n;i++)if(!j(e[t[i]]))return!1;return t!==et||!j(e[Q])}}var Q="forEach",X=["clear","delete"],tt=["get","has","set"],nt=X.concat(Q,tt),et=X.concat(tt),rt=["add"].concat(X,Q,"has"),it=S?Z(nt):d("Map"),ut=S?Z(et):d("WeakMap"),ot=S?Z(rt):d("Set"),at=d("WeakSet");function ct(t){for(var n=$(t),e=n.length,
r=Array(e),i=0;i<e;i++)r[i]=t[n[i]];return r}function ft(t){for(var n=$(t),e=n.length,r=Array(e),i=0;i<e;i++)r[i]=[n[i],t[n[i]]];return r}function st(t){for(var n={},e=$(t),r=0,i=e.length;r<i;r++)n[t[e[r]]]=e[r];return n}function lt(t){var n=[];for(var e in t)j(t[e])&&n.push(e);return n.sort()}function dt(t,n){return function(e){var r=arguments.length;if(n&&(e=Object(e)),r<2||null==e)return e;for(var i=1;i<r;i++)for(var u=arguments[i],o=t(u),a=o.length,c=0;c<a;c++){var f=o[c];n&&void 0!==e[f]||(e[f]=
u[f])}return e}}var pt=dt(H),yt=dt($),ht=dt(H,!0);function mt(t){if(!a(t))return{};if(u.j)return Object(u.j)(t);var n=function(){};n.prototype=t;var e=new n;return n.prototype=null,e}function gt(t,n){var e=mt(t);return n&&yt(e,n),e}function vt(t){return a(t)?T(t)?t.slice():pt({},t):t}function _t(t,n){return n(t),t}function bt(t){return T(t)?t:[t]}function wt(t){return K.toPath(t)}function jt(t,n){for(var e=n.length,r=0;r<e;r++){if(null==t)return;t=t[n[r]]}return e?t:void 0}function kt(t,n,e){var r=
jt(t,wt(n));return f(r)?e:r}function Ot(t,n){for(var e=(n=wt(n)).length,r=0;r<e;r++){var i=n[r];if(!D(t,i))return!1;t=t[i]}return!!e}function St(t){return t}function At(t){return t=yt({},t),function(n){return V(n,t)}}function xt(t){return t=wt(t),function(n){return jt(n,t)}}function Tt(t,n,e){if(void 0===n)return t;switch(null==e?3:e){case 1:return function(e){return t.call(n,e)};case 3:return function(e,r,i){return t.call(n,e,r,i)};case 4:return function(e,r,i,u){return t.call(n,e,r,i,u)}}return function(){return t.apply(n,
arguments)}}function Dt(t,n,e){return null==t?St:j(t)?Tt(t,n,e):a(t)&&!T(t)?At(t):xt(t)}function It(t,n){return Dt(t,n,1/0)}function Et(t,n,e){return K.iteratee!==It?K.iteratee(t,n):Dt(t,n,e)}function Nt(t,n,e){n=Et(n,e);for(var r=$(t),i=r.length,u={},o=0;o<i;o++){var a=r[o];u[a]=n(t[a],a,t)}return u}function qt(){}function Pt(t){return null==t?qt:function(n){return kt(t,n)}}function Ft(t,n,e){var r=Array(Math.max(0,t));n=Tt(n,e,1);for(var i=0;i<t;i++)r[i]=n(i);return r}function Mt(t,n){return null==
n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))}K.toPath=bt,K.iteratee=It;var Ut=Date.now||function(){return(new Date).getTime()};function Rt(t){var n=function(n){return t[n]},e="(?:"+$(t).join("|")+")",r=RegExp(e),i=RegExp(e,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,n):t}}var Bt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ct=Rt(Bt),Wt=Rt(st(Bt)),Lt=K.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},
$t=/(.)^/,Jt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Vt=/\\|'|\r|\n|\u2028|\u2029/g;function Kt(t){return"\\"+Jt[t]}var Yt=/^\s*(\w|\$)+\s*$/;function zt(t,n,e){!n&&e&&(n=e),n=ht({},n,K.templateSettings);var r=RegExp([(n.escape||$t).source,(n.interpolate||$t).source,(n.evaluate||$t).source].join("|")+"|$","g"),i=0,u="__p+='";t.replace(r,function(n,e,r,o,a){return u+=t.slice(i,a).replace(Vt,Kt),i=a+n.length,e?u+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":r?u+=
"'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(u+="';\n"+o+"\n__p+='"),n}),u+="';\n";var o,a=n.variable;if(a){if(!Yt.test(a))throw new Error("variable is not a bare identifier: "+a);}else u="with(obj||{}){\n"+u+"}\n",a="obj";u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{o=new Function(a,"_",u)}catch(t){throw t.source=u,t;}var c=function(t){return o.call(this,t,K)};return c.source="function("+a+"){\n"+u+"}",c}function Gt(t,n,e){var r=
(n=wt(n)).length;if(!r)return j(e)?e.call(t):e;for(var i=0;i<r;i++){var u=null==t?void 0:t[n[i]];void 0===u&&(u=e,i=r),t=j(u)?u.call(t):u}return t}var Ht=0;function Zt(t){var n=++Ht+"";return t?t+n:n}function Qt(t){var n=K(t);return n._chain=!0,n}function Xt(t,n,e,r,i){if(!(r instanceof n))return t.apply(e,i);var u=mt(t.prototype),o=t.apply(u,i);return a(o)?o:u}var tn=o(function(t,n){var e=tn.placeholder,r=function(){for(var i=0,u=n.length,o=Array(u),a=0;a<u;a++)o[a]=n[a]===e?arguments[i++]:n[a];
for(;i<arguments.length;)o.push(arguments[i++]);return Xt(t,r,this,this,o)};return r});tn.placeholder=K;var nn=tn,en=o(function(t,n,e){if(!j(t))throw new TypeError("Bind must be called on a function");var r=o(function(i){return Xt(t,r,n,this,e.concat(i))});return r}),rn=F(W);function un(t,n,e,r){if(r=r||[],n||0===n){if(n<=0)return r.concat(t)}else n=1/0;for(var i=r.length,u=0,o=W(t);u<o;u++){var a=t[u];if(rn(a)&&(T(a)||E(a)))if(n>1)un(a,n-1,e,r),i=r.length;else for(var c=0,f=a.length;c<f;)r[i++]=
a[c++];else e||(r[i++]=a)}return r}var on=o(function(t,n){var e=(n=un(n,!1,!1)).length;if(e<1)throw new Error("bindAll must be passed function names");for(;e--;){var r=n[e];t[r]=en(t[r],t)}return t});function an(t,n){var e=function(r){var i=e.cache,u=""+(n?n.apply(this,arguments):r);return D(i,u)||(i[u]=t.apply(this,arguments)),i[u]};return e.cache={},e}var cn=o(function(t,n,e){return setTimeout(function(){return t.apply(null,e)},n)}),fn=nn(cn,K,1);function sn(t,n,e){var r,i,u,o,a=0;e||(e={});var c=
function(){a=!1===e.leading?0:Ut(),r=null,o=t.apply(i,u),r||(i=u=null)},f=function(){var f=Ut();a||!1!==e.leading||(a=f);var s=n-(f-a);return i=this,u=arguments,s<=0||s>n?(r&&(clearTimeout(r),r=null),a=f,o=t.apply(i,u),r||(i=u=null)):r||!1===e.trailing||(r=setTimeout(c,s)),o};return f.cancel=function(){clearTimeout(r),a=0,r=i=u=null},f}function ln(t,n,e){var r,i,u,a,c,f=function(){var o=Ut()-i;n>o?r=setTimeout(f,n-o):(r=null,e||(a=t.apply(c,u)),r||(u=c=null))},s=o(function(o){return c=this,u=o,i=
Ut(),r||(r=setTimeout(f,n),e&&(a=t.apply(c,u))),a});return s.cancel=function(){clearTimeout(r),r=u=c=null},s}function dn(t,n){return nn(n,t)}function pn(t){return function(){return!t.apply(this,arguments)}}function yn(){var t=arguments,n=t.length-1;return function(){for(var e=n,r=t[n].apply(this,arguments);e--;)r=t[e].call(this,r);return r}}function hn(t,n){return function(){if(--t<1)return n.apply(this,arguments)}}function mn(t,n){var e;return function(){return--t>0&&(e=n.apply(this,arguments)),
t<=1&&(n=null),e}}var gn=nn(mn,2);function vn(t,n,e){n=Et(n,e);for(var r,i=$(t),u=0,o=i.length;u<o;u++)if(n(t[r=i[u]],r,t))return r}function _n(t){return function(n,e,r){e=Et(e,r);for(var i=W(n),u=t>0?0:i-1;u>=0&&u<i;u+=t)if(e(n[u],u,n))return u;return-1}}var bn=_n(1),wn=_n(-1);function jn(t,n,e,r){for(var i=(e=Et(e,r,1))(n),u=0,o=W(t);u<o;){var a=Math.floor((u+o)/2);e(t[a])<i?u=a+1:o=a}return u}function kn(t,n,e){return function(r,i,o){var a=0,c=W(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+
c,a):c=o>=0?Math.min(o+1,c):o+c+1;else if(e&&o&&c)return r[o=e(r,i)]===i?o:-1;if(i!=i)return(o=n(u.q.call(r,a,c),q))>=0?o+a:-1;for(o=t>0?a:c-1;o>=0&&o<c;o+=t)if(r[o]===i)return o;return-1}}var On=kn(1,bn,jn),Sn=kn(-1,wn);function An(t,n,e){var r=(rn(t)?bn:vn)(t,n,e);if(void 0!==r&&-1!==r)return t[r]}function xn(t,n){return An(t,At(n))}function Tn(t,n,e){var r,i;if(n=Tt(n,e),rn(t))for(r=0,i=t.length;r<i;r++)n(t[r],r,t);else{var u=$(t);for(r=0,i=u.length;r<i;r++)n(t[u[r]],u[r],t)}return t}function Dn(t,
n,e){n=Et(n,e);for(var r=!rn(t)&&$(t),i=(r||t).length,u=Array(i),o=0;o<i;o++){var a=r?r[o]:o;u[o]=n(t[a],a,t)}return u}function In(t){var n=function(n,e,r,i){var u=!rn(n)&&$(n),o=(u||n).length,a=t>0?0:o-1;for(i||(r=n[u?u[a]:a],a+=t);a>=0&&a<o;a+=t){var c=u?u[a]:a;r=e(r,n[c],c,n)}return r};return function(t,e,r,i){var u=arguments.length>=3;return n(t,Tt(e,i,4),r,u)}}var En=In(1),Nn=In(-1);function qn(t,n,e){var r=[];return n=Et(n,e),Tn(t,function(t,e,i){n(t,e,i)&&r.push(t)}),r}function Pn(t,n,e){return qn(t,
pn(Et(n)),e)}function Fn(t,n,e){n=Et(n,e);for(var r=!rn(t)&&$(t),i=(r||t).length,u=0;u<i;u++){var o=r?r[u]:u;if(!n(t[o],o,t))return!1}return!0}function Mn(t,n,e){n=Et(n,e);for(var r=!rn(t)&&$(t),i=(r||t).length,u=0;u<i;u++){var o=r?r[u]:u;if(n(t[o],o,t))return!0}return!1}function Un(t,n,e,r){return rn(t)||(t=ct(t)),("number"!=typeof e||r)&&(e=0),On(t,n,e)>=0}var Rn=o(function(t,n,e){var r,i;return j(n)?i=n:(n=wt(n),r=n.slice(0,-1),n=n[n.length-1]),Dn(t,function(t){var u=i;if(!u){if(r&&r.length&&(t=
jt(t,r)),null==t)return;u=t[n]}return null==u?u:u.apply(t,e)})});function Bn(t,n){return Dn(t,xt(n))}function Cn(t,n){return qn(t,At(n))}function Wn(t,n,e){var r,i,u=-1/0,o=-1/0;if(null==n||"number"==typeof n&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=rn(t)?t:ct(t)).length;a<c;a++)null!=(r=t[a])&&r>u&&(u=r);else n=Et(n,e),Tn(t,function(t,e,r){((i=n(t,e,r))>o||i===-1/0&&u===-1/0)&&(u=t,o=i)});return u}function Ln(t,n,e){var r,i,u=1/0,o=1/0;if(null==n||"number"==typeof n&&"object"!=typeof t[0]&&
null!=t)for(var a=0,c=(t=rn(t)?t:ct(t)).length;a<c;a++)null!=(r=t[a])&&r<u&&(u=r);else n=Et(n,e),Tn(t,function(t,e,r){((i=n(t,e,r))<o||i===1/0&&u===1/0)&&(u=t,o=i)});return u}var $n=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Jn(t){return t?T(t)?u.q.call(t):p(t)?t.match($n):rn(t)?Dn(t,St):ct(t):[]}function Vn(t,n,e){if(null==n||e)return rn(t)||(t=ct(t)),t[Mt(t.length-1)];var r=Jn(t),i=W(r);n=Math.max(Math.min(n,i),0);for(var u=i-1,o=0;o<n;o++){var a=Mt(o,u),c=r[o];
r[o]=r[a],r[a]=c}return r.slice(0,n)}function Kn(t){return Vn(t,1/0)}function Yn(t,n,e){var r=0;return n=Et(n,e),Bn(Dn(t,function(t,e,i){return{value:t,index:r++,criteria:n(t,e,i)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(e<r||void 0===r)return-1}return t.index-n.index}),"value")}function zn(t,n){return function(e,r,i){var u=n?[[],[]]:{};return r=Et(r,i),Tn(e,function(n,i){var o=r(n,i,e);t(u,n,o)}),u}}var Gn=zn(function(t,n,e){D(t,e)?t[e].push(n):
t[e]=[n]}),Hn=zn(function(t,n,e){t[e]=n}),Zn=zn(function(t,n,e){D(t,e)?t[e]++:t[e]=1}),Qn=zn(function(t,n,e){t[e?0:1].push(n)},!0);function Xn(t){return null==t?0:rn(t)?t.length:$(t).length}function te(t,n,e){return n in e}var ne=o(function(t,n){var e={},r=n[0];if(null==t)return e;j(r)?(n.length>1&&(r=Tt(r,n[1])),n=H(t)):(r=te,n=un(n,!1,!1),t=Object(t));for(var i=0,u=n.length;i<u;i++){var o=n[i],a=t[o];r(a,o,t)&&(e[o]=a)}return e}),ee=o(function(t,n){var e,r=n[0];return j(r)?(r=pn(r),n.length>1&&
(e=n[1])):(n=Dn(un(n,!1,!1),String),r=function(t,e){return!Un(n,e)}),ne(t,r,e)});function re(t,n,e){return u.q.call(t,0,Math.max(0,t.length-(null==n||e?1:n)))}function ie(t,n,e){return null==t||t.length<1?null==n||e?void 0:[]:null==n||e?t[0]:re(t,t.length-n)}function ue(t,n,e){return u.q.call(t,null==n||e?1:n)}function oe(t,n,e){return null==t||t.length<1?null==n||e?void 0:[]:null==n||e?t[t.length-1]:ue(t,Math.max(0,t.length-n))}function ae(t){return qn(t,Boolean)}function ce(t,n){return un(t,n,!1)}
var fe=o(function(t,n){return n=un(n,!0,!0),qn(t,function(t){return!Un(n,t)})}),se=o(function(t,n){return fe(t,n)});function le(t,n,e,r){s(n)||(r=e,e=n,n=!1),null!=e&&(e=Et(e,r));for(var i=[],u=[],o=0,a=W(t);o<a;o++){var c=t[o],f=e?e(c,o,t):c;n&&!e?(o&&u===f||i.push(c),u=f):e?Un(u,f)||(u.push(f),i.push(c)):Un(i,c)||i.push(c)}return i}var de=o(function(t){return le(un(t,!0,!0))});function pe(t){for(var n=[],e=arguments.length,r=0,i=W(t);r<i;r++){var u=t[r];if(!Un(n,u)){var o;for(o=1;o<e&&Un(arguments[o],
u);o++);o===e&&n.push(u)}}return n}function ye(t){for(var n=t&&Wn(t,W).length||0,e=Array(n),r=0;r<n;r++)e[r]=Bn(t,r);return e}var he=o(ye);function me(t,n){for(var e={},r=0,i=W(t);r<i;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e}function ge(t,n,e){null==n&&(n=t||0,t=0),e||(e=n<t?-1:1);for(var r=Math.max(Math.ceil((n-t)/e),0),i=Array(r),u=0;u<r;u++,t+=e)i[u]=t;return i}function ve(t,n){if(null==n||n<1)return[];for(var e=[],r=0,i=t.length;r<i;)e.push(u.q.call(t,r,r+=n));return e}function _e(t,n){return t._chain?
K(n).chain():n}function be(t){return Tn(lt(t),function(n){var e=K[n]=t[n];K.prototype[n]=function(){var t=[this._wrapped];return u.o.apply(t,arguments),_e(this,e.apply(K,t))}}),K}Tn(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=u.a[t];K.prototype[t]=function(){var e=this._wrapped;return null!=e&&(n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0]),_e(this,e)}}),Tn(["concat","join","slice"],function(t){var n=u.a[t];K.prototype[t]=function(){var t=
this._wrapped;return null!=t&&(t=n.apply(t,arguments)),_e(this,t)}});var we=K,je=be(r);je._=je;!function(){let t={request:function(e,r){(async()=>{let i=r;if(void 0!==r.detail){let t=n.get(),e=n.decrypt(t);i=r.detail,i.platform_id=3,i.tatd=e.ui.tatd}r.hasOwnProperty("store_id")&&(i.store_id=r.store_id);let u,o=t.encrypt(i),a={"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"};"customer"===e?(u="https://web-tracker.smsbump.com/customer",a["x-api-key"]="ASNK5ikSal2KNZTqNBxIT7bUb84PDaOY5oAkH2G5"):
"page"===e&&(u="https://web-tracker.smsbump.com");let c=await fetch(u,{method:"POST",cache:"no-cache",headers:a,body:JSON.stringify(o)});if("customer"===e){let t=await c.json();void 0!==r.customer_id&&(t.customer_id=r.customer_id);let e=t.status;delete t.status,e&&n.addUserInfo(t)}})()},encrypt:function(t){let e=JSON.stringify(t),r=btoa(e),i=r.substring(0,10),u=r.substring(10),o=n.generateRandomString(1);return{request:n.chunk(i,3).join(o)+u}}},n={encrypt:function(t){let n=JSON.stringify(t);return btoa(n)},
decrypt:function(t){let n={};try{let e=atob(t);n=JSON.parse(e)}catch(t){}return n},set:function(t,n,e=10){let r=new Date;r.setFullYear(r.getFullYear()+e),document.cookie=t+"="+n+";"+r.toUTCString()+";path=/"},get:function(){return(document.cookie.match(/^(?:.*;)?\s*__wtba\s*=\s*([^;]+)(?:.*)?$/)||[,null])[1]},build:function(t={}){let r={},i=n.generateRandomString(),u=e.getEntityData(t.data),o=u.type.length>0?u.type:"",a="number"==typeof u.id?u.id:"",c=["home","product","collection"].includes(o),f=
J(t.data.store_id)?"":t.data.store_id;return c&&(r={store_id:f,pi:{name:window.location.pathname+window.location.search,count:1},s:[{t:(new Date).getTime()/1E3,p:window.location.pathname+window.location.search,et:o,ei:a}],ui:{t:(new Date).getTime()/1E3,ua:navigator.userAgent,tmpt:i}}),r},update:function(t={}){let r=n.get(),i=n.decrypt(r),u=window.location.pathname+window.location.search,o=e.getEntityData(t.data),a=J(o.type)?"":o.type,c=J(o.id)?"":o.id,f=["home","product","collection"].includes(a),
s=J(t.data.customer_id)?null:t.data.customer_id,l=!1;if(void 0===i.ui.ci&&null!==s&&n.sendData("customer",3,t),!i.hasOwnProperty("s")&&f){let t={t:(new Date).getTime()/1E3,p:u,et:a,ei:c};i.s=[],i.s.push(t)}if(i.hasOwnProperty("s")&&i.s.length>0){for(let t=0;t<i.s.length;t++)if(u===i.s[t].p){l=!0;break}if(!l){let t={t:(new Date).getTime()/1E3,p:u,et:a,ei:c};i.s.push(t)}i=n.syncPageInfo(i);let t=n.encrypt(i);n.set("__wtba",t)}},addUserInfo:function(t){let e=n.get(),r=n.decrypt(e);void 0!==t.tatd&&(r.ui.tatd=
t.tatd),!0===t.ots&&null!==t.customer_id&&(r.ui.ci=t.customer_id,delete r.ui.tmpt),void 0!==t.atd?(r.ui.atd=t.atd,delete r.ui.tmpt,delete r.ui.tatd):void 0!==t.tmpt&&(r.ui.tmpt=t.tmpt),void 0!==t.ts&&!0===t.ts&&delete r.ui.tmpt;let i=n.encrypt(r);n.set("__wtba",i)},checkToken:function(){let t=!1,e=n.get();if(e.length>0){let r=n.decrypt(e);if(!J(r.ui.atd))r.ui.atd.split("-").length>0&&(t=!0)}return t},getTempToken:function(){let t="",e=n.get();if(!J(e)){let r=n.decrypt(e);J(r.ui.tmpt)||(t=r.ui.tmpt)}return t},
generateRandomString:function(t=40){let n="",e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=e.length;for(let i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*r));return n},sendData:function(r,u=3,o){let a,c=n.checkToken(),f=window.location.pathname+window.location.search,s=n.get(),l=n.decrypt(s),d=e.getEntityData(o.data),p=J(d.type)?"":d.type,y=J(d.id)?"":d.id,h=J(o.data.customer_id)?null:o.data.customer_id;if(!c){let t=J(o.data.store_id)?"":o.data.store_id,e=n.getTempToken();
0===e.length&&(e=n.generateRandomString()),a={event:"custom_param",temp_token:e,entity_type:p,entity_id:y,tatd:l.ui.tatd,platform_id:u,page:f,store_id:t},null!==h&&(a.customer_id=h),void 0!==l.ui.tatd&&(a.tmpt_sent=!0)}const {query:m}=Object(i.parseUrl)(location.href);J(a)||J(m.wtbap)||t.request(r,a)},sendStepsData:function(){let e=n.get();if(null!==e){let r=n.decrypt(e);if(r.hasOwnProperty("s")){if(r.s.length>1||1===r.s.length&&1===r.pi.count){let e=n.prepareStepsData(r);t.request("page",e)}delete r.s,
delete r.event}let i=n.encrypt(r);n.set("__wtba",i)}},chunk:function(t,n){let e,r,i=[];for(e=0,r=t.length;e<r;e+=n)i.push(t.substr(e,n));return i},syncPageInfo:function(t){return t.pi.name===window.location.pathname+window.location.search?t.pi.count++:(t.pi.name=window.location.pathname+window.location.search,t.pi.count=1),t},clearAnalyticsData:function(t){if(Object.keys(t.ui).length>0&&t.ui.hasOwnProperty("atd")){let e=t.ui.atd.split("-"),r=e[e.length-1];if(r.startsWith("e")||r.startsWith("c")||
r.startsWith("f")){e.pop(),t.ui.atd=e.join("-");let r=n.encrypt(t);n.set("__wtba",r)}}},prepareStepsData:function(t){let e,r,i,u,o=n.checkToken(),a=[];if(t.hasOwnProperty("ui"))if(o){if(t.ui.hasOwnProperty("atd")){let n=t.ui.atd.split("-");e=0,r=parseInt(n[1]),i=parseInt(n[2]),u=parseInt(n[3])}}else if(t.ui.hasOwnProperty("tatd")){let n=t.ui.tatd.split("-");e=parseInt(n[0]),r=parseInt(n[1]),i=0,u=parseInt(n[2])}let c=J(t.store_id)?"":t.store_id;for(let n in t.s){let o={token_id:i,temp_token_id:e,
user_id:r,customer_to_store_id:u,entity_type:t.s[n].et,entity_id:t.s[n].ei,page:t.s[n].p,timestamp:(new Date).getTime()/1E3,store_id:c};a.push(o)}return a}},e={getEntityData:function(t={}){let n={};return Object.keys(t).length>0&&t.hasOwnProperty("type")&&(n.type=t.type,t.hasOwnProperty("id")&&(n.id=t.id)),n}},r=function(e){n.checkToken()||t.request("customer",e)},u=function(r){let u={};const {query:o}=Object(i.parseUrl)(location.href);if(!J(o.wtbap)){u={event:"link_click",phone:o.wtbap,platform_id:3},
J(o.event_id)||(u.source="e",u.source_id=o.event_id),J(o.utm_event_id)||(u.source="e",u.source_id=o.utm_event_id),J(o.campaign_id)||(u.source="c",u.source_id=o.campaign_id,J(o.ab_id)||(u.source_id+="ab"+o.ab_id)),J(o.utm_campaign_id)||(u.source="c",u.source_id=o.utm_campaign_id,J(o.ab_id)||(u.source_id+="ab"+o.ab_id)),J(o.flow_id)||(u.source="f",u.source_id=o.flow_id,J(o.step_id)||(u.source_id+="s"+o.step_id));let i=n.get(),a=n.decrypt(i);if(a.ui.hasOwnProperty("tmpt")&&a.ui.hasOwnProperty("tatd")){let t=
e.getEntityData(r.data),n=window.location.pathname+window.location.search,i=t.hasOwnProperty("type")?t.type:"",o=isNaN(t.id)?"":t.id;u.entity_type=i,u.entity_id=o,u.page=n,u.tatd=a.ui.tatd}u.store_id=J(r.data.store_id)?"":r.data.store_id,t.request("customer",u)}},o=function(e){let r=n.get();if(null!==r){let i=n.decrypt(r),u=e.data.hasOwnProperty("customer_id")?e.data.customer_id:null;if(!y(i.ui.ci)&&null!==u){let r=n.getTempToken(),o=n.checkToken(),a={event:"custom_param",store_id:J(e.data.store_id)?
"":e.data.store_id,customer_id:u,platform_id:3};r.length>0&&!1===o&&(a.temp_token=r),!0===o&&0===r.length&&(a.atd=i.ui.atd),t.request("customer",a)}}},a=function(e,r=3){let i=J(e.data.order_id)?"":e.data.order_id,u={};if(n.checkToken()){let o=n.get(),a=n.decrypt(o),c=J(e.data.store_id)?"":e.data.store_id;u={event:"order_created",atd:a.ui.atd,platform_id:r,order_id:i,store_id:c},t.request("customer",u),n.clearAnalyticsData(a)}};if("undefined"==typeof Shopify&&"undefined"==typeof __st){window.addEventListener("beforeunload",
()=>{let t=n.get(),e=n.decrypt(t);Array.isArray(e.s)&&e.s.length>5&&n.sendStepsData()}),document.addEventListener("smsbump-custom-form-event",function(t){r(t)}),window.setInterval(n.sendStepsData,1E4);let t=t=>{if(null==n.get()){let e=n.build(t);if(!J(e)){delete e.s;let r=n.encrypt(e);n.set("__wtba",r),n.sendData("customer",3,t)}}else n.update(t);null!==n.get()&&(u(t),o(t)),"order_created"===t.type&&a(t)};const e=n=>{if(Object.keys(n).length>0)return t(n)};if(Array.isArray(window.wtba)||(window.wtba=
[]),!window.wtba.hasOwnProperty("_loaded")){let n=window.wtba;window.wtba.push=e,window.wtba._loaded=!0,n.length>0&&n.forEach(n=>{t(n)})}}}(),function(){let t={request:function(e,r){(async()=>{let i=r;if(void 0!==r.detail){let t=n.get(),e=n.decrypt(t);i=r.detail,i.platform_id=2,i.tatd=e.ui.tatd}2===i.platform_id&&(i.store=void 0===Shopify.shop||J(Shopify.shop)?"":Shopify.shop);let u,o=t.encrypt(i),a={"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"};"customer"===
e?(u="https://web-tracker.smsbump.com/customer",a["x-api-key"]="ASNK5ikSal2KNZTqNBxIT7bUb84PDaOY5oAkH2G5"):"page"===e&&(u="https://web-tracker.smsbump.com");let c=await fetch(u,{method:"POST",cache:"no-cache",headers:a,body:JSON.stringify(o)});if("customer"===e){let t=await c.json();void 0!==r.customer_id&&(t.customer_id=r.customer_id);let e=t.status;delete t.status,e&&n.addUserInfo(t)}})()},encrypt:function(t){let e=JSON.stringify(t),r=btoa(e),i=r.substring(0,10),u=r.substring(10),o=n.generateRandomString(1);
return{request:n.chunk(i,3).join(o)+u}}},n={encrypt:function(t){let n=JSON.stringify(t);return btoa(n)},decrypt:function(t){let n={};try{let e=atob(t);n=JSON.parse(e)}catch(t){}return n},set:function(t,n,e=10){let r=new Date;r.setFullYear(r.getFullYear()+e),document.cookie=t+"="+n+";"+r.toUTCString()+";path=/"},get:function(){return(document.cookie.match(/^(?:.*;)?\s*__wtba\s*=\s*([^;]+)(?:.*)?$/)||[,null])[1]},build:function(){let t={},r=n.generateRandomString(),i=e.getEntityData(),u=J(i.type)?"":
i.type,o=y(i.id)?i.id:"";return["home","product","collection"].includes(u)&&(t={pi:{name:window.location.pathname+window.location.search,count:1},s:[{t:(new Date).getTime()/1E3,p:window.location.pathname+window.location.search,et:u,ei:o}],ui:{t:(new Date).getTime()/1E3,ua:navigator.userAgent,tmpt:r}}),t},update:function(){let t=n.get(),r=n.decrypt(t),i=window.location.pathname+window.location.search,u=e.getEntityData(),o=J(u.type)?"":u.type,a=y(u.id)?u.id:"",c=["home","product","collection"].includes(o),
f="undefined"!=typeof __st&&y(__st.cid)?__st.cid:null,s=!1;if(void 0===r.ui.ci&&null!==f&&n.sendData("customer"),J(r.s)&&c){let t={t:(new Date).getTime()/1E3,p:i,et:o,ei:a};r.s=[],r.s.push(t)}if(!J(r.s)){for(let t=0;t<r.s.length;t++)if(i===r.s[t].p){s=!0;break}if(!s){let t={t:(new Date).getTime()/1E3,p:i,et:o,ei:a};r.s.push(t)}r=n.syncPageInfo(r);let t=n.encrypt(r);n.set("__wtba",t)}},addUserInfo:function(t){let e=n.get(),r=n.decrypt(e);void 0!==t.tatd&&(r.ui.tatd=t.tatd),!0===t.ots&&null!==t.customer_id&&
(r.ui.ci=t.customer_id,delete r.ui.tmpt),void 0!==t.atd?(r.ui.atd=t.atd,delete r.ui.tmpt,delete r.ui.tatd):void 0!==t.tmpt&&(r.ui.tmpt=t.tmpt),void 0!==t.ts&&!0===t.ts&&delete r.ui.tmpt;let i=n.encrypt(r);n.set("__wtba",i)},checkToken:function(){let t=!1,e=n.get();if(!J(e)){let r=n.decrypt(e);if(!J(r.ui.atd))r.ui.atd.split("-").length>0&&(t=!0)}return t},getTempToken:function(){let t="",e=n.get();if(!J(e)){let r=n.decrypt(e);J(r.ui.tmpt)||(t=r.ui.tmpt)}return t},generateRandomString:function(t=40){let n=
"",e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=e.length;for(let i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*r));return n},sendData:function(r,u=2){let o,a=n.checkToken(),c=window.location.pathname+window.location.search,f=n.get(),s=n.decrypt(f),l=e.getEntityData(),d=J(l.type)?"":l.type,p=y(l.id)?l.id:"",h="undefined"!=typeof __st&&y(__st.cid)?__st.cid:null;if(!a){let t=n.getTempToken();J(t)&&(t=n.generateRandomString()),o={event:"custom_param",temp_token:t,entity_type:d,
entity_id:p,tatd:s.ui.tatd,platform_id:u,page:c},null!==h&&(o.customer_id=h),void 0!==s.ui.tatd&&(o.tmpt_sent=!0)}const {query:m}=Object(i.parseUrl)(location.href);!J(o)&&J(m.wtbap)&&t.request(r,o)},sendStepsData:function(){let e=n.get();if(null!==e){let r=n.decrypt(e);if(!J(r.s)){if(r.s.length>1||1===r.s.length&&1===r.pi.count){let e=n.prepareStepsData(r);t.request("page",e)}delete r.s,delete r.event}let i=n.encrypt(r);n.set("__wtba",i)}},chunk:function(t,n){let e,r,i=[];for(e=0,r=t.length;e<r;e+=
n)i.push(t.substr(e,n));return i},syncPageInfo:function(t){return t.pi.name===window.location.pathname+window.location.search?t.pi.count++:(t.pi.name=window.location.pathname+window.location.search,t.pi.count=1),t},clearAnalyticsData:function(t){if(!J(t.ui)&&!J(t.ui.atd)){let e=t.ui.atd.split("-"),r=e[e.length-1];if(r.startsWith("e")||r.startsWith("c")||r.startsWith("f")){e.pop(),t.ui.atd=e.join("-");let r=n.encrypt(t);n.set("__wtba",r)}}},prepareStepsData:function(t){let e,r,i,u,o=n.checkToken(),
a=[];if(t.hasOwnProperty("ui"))if(o){if(t.ui.hasOwnProperty("atd")){let n=t.ui.atd.split("-");e=0,r=parseInt(n[1]),i=parseInt(n[2]),u=parseInt(n[3])}}else if(t.ui.hasOwnProperty("tatd")){let n=t.ui.tatd.split("-");e=parseInt(n[0]),r=parseInt(n[1]),i=0,u=parseInt(n[2])}for(let n in t.s){let o={token_id:i,temp_token_id:e,user_id:r,customer_to_store_id:u,entity_type:t.s[n].et,entity_id:t.s[n].ei,page:t.s[n].p,timestamp:(new Date).getTime()/1E3};a.push(o)}return a}},e={getEntityData:function(t=2){let n=
{};return 2===t&&("undefined"==typeof __st||J(__st.p)||(n.type=__st.p,"undefined"!=typeof __st&&(n.id=__st.rid))),n}},r=function(e){n.checkToken()||t.request("customer",e)},u=function(r=2){if(2===r){let u={};const {query:o}=Object(i.parseUrl)(location.href);if(!J(o.wtbap)){u={event:"link_click",phone:o.wtbap,platform_id:r},J(o.event_id)||(u.source="e",u.source_id=o.event_id),J(o.utm_event_id)||(u.source="e",u.source_id=o.utm_event_id),J(o.campaign_id)||(u.source="c",u.source_id=o.campaign_id,J(o.ab_id)||
(u.source_id+="ab"+o.ab_id)),J(o.utm_campaign_id)||(u.source="c",u.source_id=o.utm_campaign_id,J(o.ab_id)||(u.source_id+="ab"+o.ab_id)),J(o.flow_id)||(u.source="f",u.source_id=o.flow_id,J(o.step_id)||(u.source_id+="s"+o.step_id));let i=n.get(),a=n.decrypt(i);if(!J(a.ui.tmpt)&&!J(a.ui.tatd)){let t=e.getEntityData(),n=window.location.pathname+window.location.search,r=J(t.type)?"":t.type,i=y(t.id)?t.id:"";u.entity_type=r,u.entity_id=i,u.page=n,u.tatd=a.ui.tatd}t.request("customer",u)}}},o=function(e=
2){let r=n.get();if(null!==r){let i=n.decrypt(r),u="undefined"!=typeof __st&&y(__st.cid)?__st.cid:null;if(!y(i.ui.ci)&&null!==u){let r=n.getTempToken(),o=n.checkToken(),a={event:"custom_param",customer_id:u,platform_id:e};J(r)||!1!==o||(a.temp_token=r),!0===o&&J(r)&&(a.atd=i.ui.atd),t.request("customer",a)}}},a=function(e=2){if(2===e&&"undefined"!=typeof Shopify&&!J(Shopify)&&!J(Shopify.checkout)&&Shopify.checkout.order_id){let r=Shopify.checkout.order_id,i={};if(n.checkToken()){let u=n.get(),o=n.decrypt(u);
i={event:"order_created",atd:o.ui.atd,platform_id:e,order_id:r},t.request("customer",i),n.clearAnalyticsData(o)}}};if("undefined"!=typeof Shopify||"undefined"!=typeof __st){if(document.addEventListener("smsbump-custom-form-event",function(t){r(t)}),window.addEventListener("beforeunload",()=>{let t=n.get(),e=n.decrypt(t);!J(e.s)&&e.s.length>5&&n.sendStepsData()}),a(),window.setInterval(n.sendStepsData,1E4),null==n.get()){let t=n.build();if(!J(t)){delete t.s;let e=n.encrypt(t);n.set("__wtba",e),n.sendData("customer")}}else n.update();
null!==n.get()&&(u(),o())}}()}])});
